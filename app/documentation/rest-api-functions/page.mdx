import { HeroPattern } from '@/components/documentation/HeroPattern'

export const metadata = {
  title: 'REST API Functions',
  description: 'Detailed information about the used REST API functions in the project',
}

<HeroPattern />

# Used WordPress REST API Functions

The REST API functions are a set of functions that can be used to retrieve data from the REST API.

## getAllPosts {{ tag: 'GET', label: '/wp-json/wp/v2/posts?author={author}&tags={tag}&categories={category}' }}

<Row>
  <Col>
    The `getAllPosts` function retrieves posts from a WordPress website using its REST API. It allows filtering posts based on the author, tag, and category.

    ### **How It Works**
    - The function constructs a request URL using the provided filter parameters.
    - It fetches the data from the WordPress REST API.
    - The response is parsed into an array of `Post` objects.

    ### **Optional Parameters**
    <Properties>
      <Property name="author" type="string">
        The ID or slug of the post's author.
      </Property>
      <Property name="tag" type="string">
        A tag associated with the posts.
      </Property>
      <Property name="category" type="string">
        A category associated with the posts.
      </Property>
    </Properties>

    ### **Return Value**
    <Properties>
        <Property name="posts" type="Post[]">
          An array of WordPress posts matching the filter criteria.
        </Property>
    </Properties>

    ### **Example Usage**
    ```ts
    const allPosts = await getAllPosts({ author: "1", tag: "tech", category: "news" });
    console.log(allPosts);
    ```
    
    ### **Error Handling**
    - If the fetch request fails, the function throws an error.
    - The error message includes a descriptive string along with details of the encountered issue.

    <div className="not-prose">
      <Button
        href="https://developer.wordpress.org/rest-api/reference/posts/"
        variant="text"
        arrow="right"
        target="_blank"
      >
        <>Read more about the WordPress REST API Posts Endpoint</>
      </Button>
    </div>
  </Col>

  <Col sticky>
    <CodeGroup title="Request">
    ```ts
      export const getAllPosts = async (
        filterParams?: {
          search?: string;
          author?: string;
          tag?: string;
          category?: string;
        }
      ): Promise<Post[]> => {
        try {
          const postsQuery: Record<string, any> = {};

          if (filterParams?.search) {
            postsQuery.search = filterParams.search;
          }

          if (filterParams?.author) {
            postsQuery.author = filterParams.author;
          }

          if (filterParams?.tag) {
            postsQuery.tags = filterParams.tag;
          }

          if (filterParams?.category) {
            postsQuery.categories = filterParams.category;
          }

          const postsUrl: string = getUrl("/wp-json/wp/v2/posts", postsQuery);

          const posts = wordPressFetch<Post[]>(postsUrl, {
            next: {
              ...defaultFetchOptions.next,
              tags: mergeQueryTags(defaultFetchOptions.next?.tags, ["posts"])
            }
          });

          return posts;
        } catch (error: any) {
          throw new Error(`${GET_ALL_POSTS_ERROR_DETAILS} ${error.message}`);
        }
      };
    ```
    </CodeGroup>

    ```ts {{ title: 'Return Type' }}
      export type Post = {
        id: number;
        date: string;
        date_gmt: string;
        guid: {
          rendered: string;
        };
        modified: string;
        modified_gmt: string;
        slug: string;
        status: "publish" | "future" | "draft" | "pending" | "private";
        type: string;
        link: string;
        title: {
          rendered: string;
        };
        content: {
          rendered: string;
          protected: boolean;
        };
        excerpt: {
          rendered: string;
          protected: boolean;
        };
        author: number;
        featured_media: number;
        comment_status: "open" | "closed";
        ping_status: "open" | "closed";
        sticky: boolean;
        template: string;
        format: | "standard" | "aside" | "chat" | "gallery" | "link" | "image" | "quote" | "status" | "video" | "audio";
        meta: any;
        categories: number[];
        tags: number[];
      };
    ```
  </Col>
</Row>

---

## getAllAuthors {{ tag: 'GET', label: '/wp-json/wp/v2/users' }}

<Row>
  <Col>
    The `getAllAuthors` function retrieves authors from a WordPress website using its REST API.

    ### **How It Works**
    - The function constructs a request URL.
    - It fetches the data from the WordPress REST API.
    - The response is parsed into an array of `Author` objects.

    ### **Return Value**
    <Properties>
        <Property name="authors" type="Author[]">
          An array of WordPress authors.
        </Property>
    </Properties>

    ### **Example Usage**
    ```ts
    const allAuthors = await getAllAuthors();
    console.log(allAuthors);
    ```
    
    ### **Error Handling**
    - If the fetch request fails, the function throws an error.
    - The error message includes a descriptive string along with details of the encountered issue.

    <div className="not-prose">
      <Button
        href="https://developer.wordpress.org/rest-api/reference/users/"
        variant="text"
        arrow="right"
        target="_blank"
      >
        <>Read more about the WordPress REST API Authors Endpoint</>
      </Button>
    </div>
  </Col>

  <Col sticky>
    <CodeGroup title="Request">
    ```ts
      export const getAllAuthors = async (): Promise<Author[]> => {
        try {
          const allAuthorsUrl: string = getUrl("/wp-json/wp/v2/users");

          const allAuthors = await wordPressFetch<Author[]>(allAuthorsUrl, {
            next: {
              ...defaultFetchOptions.next,
              tags: mergeQueryTags(defaultFetchOptions.next?.tags, ['authors'])
            }
          });

          return allAuthors;
        } catch (error: any) {
          throw new Error(`${GET_ALL_AUTHORS_ERROR_DETAILS} ${error.message}`);
        }
      };
    ```
    </CodeGroup>

    ```ts {{ title: 'Return Type' }}
      export type Author = {
        id: number;
        name: string;
        url: string;
        description: string;
        link: string;
        slug: string;
        avatar_urls: {
          [key: string]: string;
        };
        meta: any;
      };
    ```
  </Col>
</Row>

---

## getAllTags {{ tag: 'GET', label: '/wp-json/wp/v2/tags' }}

<Row>
  <Col>
    The `getAllTags` function retrieves tags from a WordPress website using its REST API.

    ### **How It Works**
    - The function constructs a request URL.
    - It fetches the data from the WordPress REST API.
    - The response is parsed into an array of `Tag` objects.

    ### **Return Value**
    <Properties>
        <Property name="tags" type="Tag[]">
          An array of WordPress tags.
        </Property>
    </Properties>

    ### **Example Usage**
    ```ts
    const allTags = await getAllTags();
    console.log(allTags);
    ```
    
    ### **Error Handling**
    - If the fetch request fails, the function throws an error.
    - The error message includes a descriptive string along with details of the encountered issue.

    <div className="not-prose">
      <Button
        href="https://developer.wordpress.org/rest-api/reference/tags/"
        variant="text"
        arrow="right"
        target="_blank"
      >
        <>Read more about the WordPress REST API Tags Endpoint</>
      </Button>
    </div>
  </Col>

  <Col sticky>
    <CodeGroup title="Request">
    ```ts
     export const getAllTags = async (): Promise<Tag[]> => {
      try {
        const allTagsUrl: string = getUrl("/wp-json/wp/v2/tags");

        const allTags = await wordPressFetch<Tag[]>(allTagsUrl, {
          next: {
            ...defaultFetchOptions.next?.tags,
            tags: mergeQueryTags(defaultFetchOptions.next?.tags, ['tags'])
          }
        });

        return allTags;
      } catch (error: any) {
        throw new Error(`${GET_ALL_TAGS_ERROR_DETAILS} ${error.message}`);
      }
    };
    ```
    </CodeGroup>

    ```ts {{ title: 'Return Type' }}
      export type Tag = {
        id: number;
        count: number;
        description: string;
        link: string;
        name: string;
        slug: string;
        taxonomy: "post_tag";
        meta: any;
      };
    ```
  </Col>
</Row>

---

## getAllCategories {{ tag: 'GET', label: '/wp-json/wp/v2/categories' }}

<Row>
  <Col>
    The `getAllCategories` function retrieves categories from a WordPress website using its REST API.

    ### **How It Works**
    - The function constructs a request URL.
    - It fetches the data from the WordPress REST API.
    - The response is parsed into an array of `Category` objects.

    ### **Return Value**
    <Properties>
        <Property name="categories" type="Category[]">
          An array of WordPress categories.
        </Property>
    </Properties>

    ### **Example Usage**
    ```ts
    const allCategories = await getAllCategories();
    console.log(allCategories);
    ```
    
    ### **Error Handling**
    - If the fetch request fails, the function throws an error.
    - The error message includes a descriptive string along with details of the encountered issue.

    <div className="not-prose">
      <Button
        href="https://developer.wordpress.org/rest-api/reference/categories/"
        variant="text"
        arrow="right"
        target="_blank"
      >
        <>Read more about the WordPress REST API Categories Endpoint</>
      </Button>
    </div>
  </Col>

  <Col sticky>
    <CodeGroup title="Request">
    ```ts
      export const getAllCategories = async (): Promise<Category[]> => {
        try {
          const allCategoriesUrl: string = getUrl("/wp-json/wp/v2/categories");

          const allCategories = await wordPressFetch<Category[]>(allCategoriesUrl, {
            next: {
              ...defaultFetchOptions.next,
              tags: mergeQueryTags(defaultFetchOptions.next?.tags, ['categories'])
            }
          });

          return allCategories;
        } catch (error: any) {
          throw new Error(`${GET_ALL_CATEGORIES_ERROR_DETAILS} ${error.message}`);
        }
      };
    ```
    </CodeGroup>

    ```ts {{ title: 'Return Type' }}
      export type Category = {
        id: number;
        count: number;
        description: string;
        link: string;
        name: string;
        slug: string;
        taxonomy: "category";
        parent: number;
        meta: any[];
      };
    ```
  </Col>
</Row>

---

## getAllPages {{ tag: 'GET', label: '/wp-json/wp/v2/pages' }}

<Row>
  <Col>
    The `getAllPages` function retrieves pages from a WordPress website using its REST API.

    ### **How It Works**
    - The function constructs a request URL.
    - It fetches the data from the WordPress REST API.
    - The response is parsed into an array of `Page` objects.

    ### **Return Value**
    <Properties>
        <Property name="pages" type="Page[]">
          An array of WordPress pages.
        </Property>
    </Properties>

    ### **Example Usage**
    ```ts
    const allPages = await getAllPages();
    console.log(allPages);
    ```
    
    ### **Error Handling**
    - If the fetch request fails, the function throws an error.
    - The error message includes a descriptive string along with details of the encountered issue.

    <div className="not-prose">
      <Button
        href="https://developer.wordpress.org/rest-api/reference/pages/"
        variant="text"
        arrow="right"
        target="_blank"
      >
        <>Read more about the WordPress REST API Pages Endpoint</>
      </Button>
    </div>
  </Col>

  <Col sticky>
    <CodeGroup title="Request">
    ```ts
      export const getAllPages = async (): Promise<Page[]> => {
        try {
          const allPagesUrl: string = getUrl("/wp-json/wp/v2/pages");

          const allPages = await wordPressFetch<Page[]>(allPagesUrl, {
            next: {
              ...defaultFetchOptions.next,
              tags: mergeQueryTags(defaultFetchOptions.next?.tags, ['pages'])
            }
          });

          return allPages;
        } catch (error: any) {
          throw new Error(`${GET_ALL_PAGES_ERROR_DETAILS} ${error.message}`);
        } 
      };
    ```
    </CodeGroup>

    ```ts {{ title: 'Return Type' }}
      export type Page = {
        id: number;
        date: string;
        date_gmt: string;
        guid: {
          rendered: string;
        };
        modified: string;
        modified_gmt: string;
        slug: string;
        status: "publish" | "future" | "draft" | "pending" | "private";
        type: string;
        link: string;
        title: {
          rendered: string;
        };
        content: {
          rendered: string;
          protected: boolean;
        };
        excerpt: {
          rendered: string;
          protected: boolean;
        };
        author: number;
        featured_media: number;
        parent: number;
        menu_order: number;
        comment_status: "open" | "closed";
        ping_status: "open" | "closed";
        template: string;
        meta: any;
      };
    ```
  </Col>
</Row>

---

## getPostBySlug {{ tag: 'GET', label: '/wp-json/wp/v2/posts?slug={slug}' }}

<Row>
  <Col>
    The `getPostBySlug` function retrieves post by slug from a WordPress website using its REST API.

    ### **How It Works**
    - The function constructs a request URL using the provided slug.
    - It fetches the data from the WordPress REST API.
    - The response is parsed into a `Post` object.

    ### **Required Parameters**
    <Properties>
      <Property name="slug" type="string">
        The slug of the post.
      </Property>
    </Properties>

    ### **Return Value**
    <Properties>
        <Property name="post" type="Post">
          A WordPress post object matching the slug.
        </Property>
    </Properties>

    ### **Example Usage**
    ```ts
    const postBySlug = await getPostBySlug(slug: "example-post");
    console.log(postBySlug);
    ```
    
    ### **Error Handling**
    - If the fetch request fails, the function throws an error.
    - The error message includes a descriptive string along with details of the encountered issue.

    <div className="not-prose">
      <Button
        href="https://developer.wordpress.org/rest-api/reference/posts/"
        variant="text"
        arrow="right"
        target="_blank"
      >
        <>Read more about the WordPress REST API Posts Endpoint</>
      </Button>
    </div>
  </Col>

  <Col sticky>
    <CodeGroup title="Request">
    ```ts
      export const getPostBySlug = async (slug: string): Promise<Post> => {
        try {
          const postBySlugUrl: string = getUrl("/wp-json/wp/v2/posts", { slug });

          const postBySlugResult = await wordPressFetch<Post[]>(postBySlugUrl, {
            next: {
              ...defaultFetchOptions.next,
              tags: mergeQueryTags(defaultFetchOptions.next?.tags, [`post-by-slug-${slug}`])
            }
          });

          if (!postBySlugResult || postBySlugResult.length === 0) {
            throw new Error(`Post with slug "${slug}" not found`);
          }

          return postBySlugResult[0];
        } catch (error: any) {
          throw new Error(`${GET_POST_BY_SLUG_ERROR_DETAILS} ${error.message}`);
        }
      };
    ```
    </CodeGroup>

    ```ts {{ title: 'Return Type' }}
      export type Post = {
        id: number;
        date: string;
        date_gmt: string;
        guid: {
          rendered: string;
        };
        modified: string;
        modified_gmt: string;
        slug: string;
        status: "publish" | "future" | "draft" | "pending" | "private";
        type: string;
        link: string;
        title: {
          rendered: string;
        };
        content: {
          rendered: string;
          protected: boolean;
        };
        excerpt: {
          rendered: string;
          protected: boolean;
        };
        author: number;
        featured_media: number;
        comment_status: "open" | "closed";
        ping_status: "open" | "closed";
        sticky: boolean;
        template: string;
        format: | "standard" | "aside" | "chat" | "gallery" | "link" | "image" | "quote" | "status" | "video" | "audio";
        meta: any;
        categories: number[];
        tags: number[];
      };
    ```
  </Col>
</Row>

---

## getAuthorById {{ tag: 'GET', label: '/wp-json/wp/v2/users?id={id}' }}

<Row>
  <Col>
    The `getAuthorById` function retrieves author by Id from a WordPress website using its REST API.

    ### **How It Works**
    - The function constructs a request URL using the provided Id.
    - It fetches the data from the WordPress REST API.
    - The response is parsed into a `Author` object.

    ### **Required Parameters**
    <Properties>
      <Property name="id" type="number">
        The ID of the author.
      </Property>
    </Properties>

    ### **Return Value**
    <Properties>
        <Property name="author" type="Author">
          A WordPress author object matching the Id.
        </Property>
    </Properties>

    ### **Example Usage**
    ```ts
    const author = await getAuthorById(1);
    console.log(author);
    ```
    
    ### **Error Handling**
    - If the fetch request fails, the function throws an error.
    - The error message includes a descriptive string along with details of the encountered issue.

    <div className="not-prose">
      <Button
        href="https://developer.wordpress.org/rest-api/reference/users/"
        variant="text"
        arrow="right"
        target="_blank"
      >
        <>Read more about the WordPress REST API Authors Endpoint</>
      </Button>
    </div>
  </Col>

  <Col sticky>
    <CodeGroup title="Request">
    ```ts
      export const getAuthorById = async (id: number): Promise<Author> => {
        try {
          const authorByIdUrl: string = getUrl(`/wp-json/wp/v2/users/${id}`);

          const authorById = await wordPressFetch<Author>(authorByIdUrl, {
            next: {
              ...defaultFetchOptions.next,
              tags: mergeQueryTags(defaultFetchOptions.next?.tags, [`author-by-id-${id}`])
            }
          });

          return authorById;
        } catch (error: any) {
          throw new Error(`${GET_AUTHOR_BY_ERROR_DETAILS} ${error.message}`);
        }
      };
    ```
    </CodeGroup>

    ```ts {{ title: 'Return Type' }}
      export type Author = {
        id: number;
        name: string;
        url: string;
        description: string;
        link: string;
        slug: string;
        avatar_urls: {
          [key: string]: string;
        };
        meta: any;
      };
    ```
  </Col>
</Row>

---

## getCategoryById {{ tag: 'GET', label: '/wp-json/wp/v2/categories?id={id}' }}

<Row>
  <Col>
    The `getCategoryById` function retrieves category by Id from a WordPress website using its REST API.

    ### **How It Works**
    - The function constructs a request URL using the provided Id.
    - It fetches the data from the WordPress REST API.
    - The response is parsed into a `Category` object.

    ### **Required Parameters**
    <Properties>
      <Property name="id" type="number">
        The ID of the category.
      </Property>
    </Properties>

    ### **Return Value**
    <Properties>
        <Property name="category" type="Category">
          A WordPress category object matching the Id.
        </Property>
    </Properties>

    ### **Example Usage**
    ```ts
    const category = await getCategoryById(1);
    console.log(category);
    ```
    
    ### **Error Handling**
    - If the fetch request fails, the function throws an error.
    - The error message includes a descriptive string along with details of the encountered issue.

    <div className="not-prose">
      <Button
        href="https://developer.wordpress.org/rest-api/reference/categories/"
        variant="text"
        arrow="right"
        target="_blank"
      >
        <>Read more about the WordPress REST API Categories Endpoint</>
      </Button>
    </div>
  </Col>

  <Col sticky>
    <CodeGroup title="Request">
    ```ts
      export const getCategoryById = async (id: number): Promise<Category> => {
        try {
          const categoryByIdUrl: string = getUrl(`/wp-json/wp/v2/categories/${id}`);

          const categoryById = await wordPressFetch<Category>(categoryByIdUrl, {
            next: {
              ...defaultFetchOptions.next,
              tags: mergeQueryTags(defaultFetchOptions.next?.tags, [`category-by-${id}`])
            }
          });

          return categoryById;
        } catch (error: any) {
          throw new Error(`${GET_CATEGORY_BY_ID_ERROR_DETAILS} ${error.message}`);
        }
      };
    ```
    </CodeGroup>

    ```ts {{ title: 'Return Type' }}
       export type Category = {
        id: number;
        count: number;
        description: string;
        link: string;
        name: string;
        slug: string;
        taxonomy: "category";
        parent: number;
        meta: any[];
      };
    ```
  </Col>
</Row>

---

## getPageBySlug {{ tag: 'GET', label: '/wp-json/wp/v2/pages?slug={slug}' }}

<Row>
  <Col>
    The `getPageBySlug` function retrieves page by slug from a WordPress website using its REST API.

    ### **How It Works**
    - The function constructs a request URL using the provided slug.
    - It fetches the data from the WordPress REST API.
    - The response is parsed into a `Page` object.

    ### **Required Parameters**
    <Properties>
      <Property name="slug" type="string">
        The slug of the page.
      </Property>
    </Properties>

    ### **Return Value**
    <Properties>
        <Property name="page" type="Page">
          A WordPress page object matching the slug.
        </Property>
    </Properties>

    ### **Example Usage**
    ```ts
    const page = await getPageBySlug("example-page");
    console.log(page);
    ```
    
    ### **Error Handling**
    - If the fetch request fails, the function throws an error.
    - The error message includes a descriptive string along with details of the encountered issue.

    <div className="not-prose">
      <Button
        href="https://developer.wordpress.org/rest-api/reference/pages/"
        variant="text"
        arrow="right"
        target="_blank"
      >
        <>Read more about the WordPress REST API Pages Endpoint</>
      </Button>
    </div>
  </Col>

  <Col sticky>
    <CodeGroup title="Request">
    ```ts
      export const getPageBySlug = async (slug: string): Promise<Page> => {
        try {
          const pageBySlugUrl: string = getUrl("/wp-json/wp/v2/pages", { slug });

          const pageBySlugResult = await wordPressFetch<Page[]>(pageBySlugUrl, {
            next: {
              ...defaultFetchOptions.next,
              tags: mergeQueryTags(defaultFetchOptions.next?.tags, [`page-by-slug-${slug}`])
            }
          });

          if (!pageBySlugResult || pageBySlugResult.length === 0) {
            throw new Error(`Page with slug "${slug}" not found`);
          }

          return pageBySlugResult[0];
        } catch (error: any) {
          throw new Error(`${GET_PAGE_BY_SLUG_ERROR_DETAILS} ${error.message}`);
        }
      };
    ```
    </CodeGroup>

    ```ts {{ title: 'Return Type' }}
      export type Page = {
        id: number;
        date: string;
        date_gmt: string;
        guid: {
          rendered: string;
        };
        modified: string;
        modified_gmt: string;
        slug: string;
        status: "publish" | "future" | "draft" | "pending" | "private";
        type: string;
        link: string;
        title: {
          rendered: string;
        };
        content: {
          rendered: string;
          protected: boolean;
        };
        excerpt: {
          rendered: string;
          protected: boolean;
        };
        author: number;
        featured_media: number;
        parent: number;
        menu_order: number;
        comment_status: "open" | "closed";
        ping_status: "open" | "closed";
        template: string;
        meta: any;
      };
    ```
  </Col>
</Row>

---

## getFeaturedMediaById {{ tag: 'GET', label: '/wp-json/wp/v2/media?id={id}' }}

<Row>
  <Col>
    The `getFeaturedMediaById` function retrieves featured media by Id from a WordPress website using its REST API.

    ### **How It Works**
    - The function constructs a request URL using the provided Id.
    - It fetches the data from the WordPress REST API.
    - The response is parsed into a `FeaturedMedia` object.

    ### **Required Parameters**
    <Properties>
      <Property name="id" type="number">
        The ID of the featured media.
      </Property>
    </Properties>

    ### **Return Value**
    <Properties>
        <Property name="featuredMedia" type="FeaturedMedia">
          A WordPress featured media object matching the Id.
        </Property>
    </Properties>

    ### **Example Usage**
    ```ts
    const featuredMedia = await getFeaturedMediaById (1);
    console.log(featuredMedia);
    ```
    
    ### **Error Handling**
    - If the fetch request fails, the function throws an error.
    - The error message includes a descriptive string along with details of the encountered issue.

    <div className="not-prose">
      <Button
        href="https://developer.wordpress.org/rest-api/reference/media/"
        variant="text"
        arrow="right"
        target="_blank"
      >
        <>Read more about the WordPress REST API Featured Media Endpoint</>
      </Button>
    </div>
  </Col>

  <Col sticky>
    <CodeGroup title="Request">
    ```ts
      export const getFeaturedMediaById = async (id: number): Promise<FeaturedMedia> => {
        try {
          const featuredMediaByIdUrl = getUrl(`/wp-json/wp/v2/media/${id}`);

          const featuredMediaById = await wordPressFetch<FeaturedMedia>(featuredMediaByIdUrl, {
            next: {
              ...defaultFetchOptions.next,
              tags: mergeQueryTags(defaultFetchOptions.next?.tags, [`featured-media-by-id-${id}`])
            }
          });

          return featuredMediaById;
        } catch (error: any) {
          throw new Error(`${GET_FEATURED_MEDIA_BY_ID_ERROR_DETAILS} ${error.message}`);
        }
      };
      };
    ```
    </CodeGroup>

    ```ts {{ title: 'Return Type' }}
      export type FeaturedMedia = {
        id: number;
        date: string;
        slug: string;
        type: string;
        link: string;
        title: {
          rendered: string;
        };
        author: number;
        caption: {
          rendered: string;
        };
        alt_text: string;
        media_type: string;
        mime_type: string;
        media_details: {
          width: number;
          height: number;
          file: string;
          sizes: {
            [key: string]: {
              file: string;
              width: number;
              height: number;
              mime_type: string;
              source_url: string;
            };
          };
        };
        source_url: string;
      };
    ```
  </Col>
</Row>